.. post:: 2019-8-31
    :exclude:
    :tags: 计蒜客, Number theory
    :author: φKN1GHT

A1947 An Olympian Math Problem
------------------------------

`题面连接 <https://nanti.jisuanke.com/t/A1947>`_

题目描述
++++++++

给定 :math:`2\leq n\leq 10^{18}`，令 :math:`S(n)=\sum_{i=1}^n i\times i!`，求解 :math:`S(n)\bmod n`

解题思路
++++++++

由 :math:`n\times n!=(n+1-1)\times n!=(n+1)\times n! - n!=(n+1)!-n!`

对原式进行变换

.. math::

    \begin{align}S(n)&=1\times 1!+2\times 2!+\dots+n\times n!\\&= 2!-1!+3!-2!+\dots+(n+1)!-n!\\&=(n+1)!-1\end{align}

根据模运算性质，则有

.. math::
    \begin{align}S(n)\bmod n&=[(n+1)!-1]\bmod n\\&= [(n+1)!+n-1]\bmod n
    \\&=[(n+1)!]\bmod n+(n-1)\bmod n\\&=(n-1)\bmod n=n-1\end{align}

题解代码
++++++++

.. code-block:: cpp
    :linenos:

    #include <bits/stdc++.h>
    using namespace std;
    unsigned long long T, n;

    int main() {
        cin >> T; while(T--) cin >> n, cout << n - 1 << endl;
        return 0;
    }
